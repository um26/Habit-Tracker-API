<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>My Friends</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">
    <style> body { padding-top: 70px; } nav { position: fixed; top: 0; left: 0; right: 0; padding: 0 1rem; z-index: 1000; background: var(--card-background-color); border-bottom: 1px solid var(--card-border-color); } </style>
</head>
<body>
    <main class="container">
        <nav>
            </nav>

        <h1>My Friends</h1>
        <div th:if="${success}" style="color: green; margin-bottom: 1rem;" th:text="${success}"></div>

        <article th:if="${!pendingRequests.isEmpty()}">
            <h2>Pending Friend Requests</h2>
            <div th:each="request : ${pendingRequests}" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                <div>
                    <strong th:text="${request.user.username}">Requester Name</strong><br>
                    <small th:text="'Sent a friend request'"></small>
                </div>
                <div>
                    <form th:action="@{/friends/accept}" method="post" style="display: inline;">
                        <input type="hidden" name="requestId" th:value="${request.id}">
                        <button type="submit" class="primary">Accept</button>
                    </form>
                </div>
            </div>
        </article>
                
        <h2>Your Friends List</h2>
        <div th:if="${friends.isEmpty()}">
            <p>You haven't added any friends yet. Use the <a href="/explore">Explore</a> page to find people!</p>
        </div>
        <article th:unless="${friends.isEmpty()}">
            <div th:each="friend : ${friends}" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                <div>
                    <strong th:text="${friend.username}">Friend Name</strong><br>
                    <small th:text="'Daily Streak: ' + ${friend.dailyStreak} + ' ðŸ”¥'"></small>
                </div>
                <form th:action="@{/friends/{friendId}/nudge(friendId=${friend.uniqueUserId})}" method="post">
                    <button type="submit" class="secondary">Nudge</button>
                </form>
            </div>
        </article>
    </main>
    <script src="https://unpkg.com/feather-icons"></script>
    <script>
      feather.replace();
    </script>
</body>
</html>
